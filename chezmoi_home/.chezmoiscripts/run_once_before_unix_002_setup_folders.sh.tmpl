{{ if ne .chezmoi.os "windows" }}#!/bin/sh
# Ensure ~/.config exists
mkdir -p "$HOME/.config"

# List of config directories to symlink
CONFIG_DIRS=("fish" "nvim")

for cfgdir in "${CONFIG_DIRS[@]}"; do
    TARGET="$HOME/.config/$cfgdir"
    SOURCE="$HOME/.local/share/chezmoi/home/.config/$cfgdir"

    if [ -d "$SOURCE" ]; then
        if [ -L "$TARGET" ]; then
            echo "Symlink already exists: $TARGET"
        elif [ -d "$TARGET" ]; then
            echo "Backing up existing directory: $TARGET -> ${TARGET}.bak"
            mv "$TARGET" "${TARGET}.bak"
            ln -s "$SOURCE" "$TARGET"
            echo "Created symlink: $TARGET -> $SOURCE"
        else
            echo "Creating symlink: $TARGET -> $SOURCE"
            ln -s "$SOURCE" "$TARGET"
        fi
    else
        echo "Skipping $cfgdir: source $SOURCE does not exist"
    fi
done

echo "Creating projects folder..."
mkdir -p ~/projects
{{ end }}
